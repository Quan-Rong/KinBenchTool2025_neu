# Python 快速升级步骤

## 当前问题
- 当前 `python` 命令指向：`C:\Simcenter\2021.1\Amesim\python.bat` (Python 3.6.8)
- 这是 Simcenter Amesim 软件自带的 Python，不是系统安装的版本
- 项目需要 Python 3.11+

## 推荐方案：安装独立 Python 3.11

### 步骤 1：下载 Python 3.11

**选项 A：从官网下载（推荐）**
1. 访问：https://www.python.org/downloads/release/python-3119/
2. 下载 "Windows installer (64-bit)" 
3. 文件大小约 25MB

**选项 B：从 Microsoft Store**
1. 打开 Microsoft Store
2. 搜索 "Python 3.11"
3. 点击安装

### 步骤 2：安装 Python 3.11

1. 运行下载的安装程序
2. ✅ **必须勾选**："Add Python 3.11 to PATH"
3. 选择 "Install Now"
4. 等待安装完成

### 步骤 3：验证安装

打开**新的 PowerShell 窗口**（重要！），运行：

```powershell
# 检查 Python 版本
python --version
# 应该显示：Python 3.11.9 或类似

# 检查安装位置
where.exe python
# 应该显示类似：C:\Users\YourName\AppData\Local\Programs\Python\Python311\python.exe
```

### 步骤 4：配置项目环境

```powershell
# 进入项目目录
cd C:\CAE\Cursor_Test\KinBenchTool2025_neu

# 升级 pip
python -m pip install --upgrade pip

# 安装项目依赖
pip install -r requirements.txt
```

### 步骤 5：测试运行

```powershell
# 测试导入
python -c "import PyQt6; import numpy; import matplotlib; print('✓ 所有依赖安装成功！')"

# 运行程序
python Python_Target/src/main.py
```

## 如果遇到 PATH 冲突

如果安装后 `python` 仍然指向 Amesim 的版本，可以：

### 方案 A：使用完整路径（临时）

```powershell
# 找到新 Python 的安装路径（通常在）
$python311 = "C:\Users\$env:USERNAME\AppData\Local\Programs\Python\Python311\python.exe"

# 使用完整路径运行
& $python311 Python_Target/src/main.py
```

### 方案 B：调整 PATH 优先级（永久）

1. 打开"系统属性" → "环境变量"
2. 在"用户变量"或"系统变量"中找到 `Path`
3. 将新 Python 的路径移到最前面：
   ```
   C:\Users\YourName\AppData\Local\Programs\Python\Python311\
   C:\Users\YourName\AppData\Local\Programs\Python\Python311\Scripts\
   ```
4. 将 Amesim 的路径移到后面或删除
5. 重启 PowerShell

### 方案 C：使用 py launcher（推荐）

如果安装了 Python Launcher，可以使用：

```powershell
# 使用 Python 3.11
py -3.11 --version
py -3.11 Python_Target/src/main.py

# 或者设置为默认
py -3.11 -m pip install -r requirements.txt
```

## 创建虚拟环境（推荐）

为了避免版本冲突，建议使用虚拟环境：

```powershell
# 使用 Python 3.11 创建虚拟环境
py -3.11 -m venv venv

# 或者如果 python 已指向 3.11
python -m venv venv

# 激活虚拟环境
.\venv\Scripts\Activate.ps1

# 安装依赖
pip install -r requirements.txt

# 运行程序
python Python_Target/src/main.py
```

## 验证清单

完成后确认：

- [ ] `python --version` 显示 3.11.x
- [ ] `pip --version` 正常工作  
- [ ] 可以导入所有依赖包
- [ ] 项目可以正常启动

## 需要帮助？

如果遇到问题：
1. 检查 `where.exe python` 显示的路径
2. 确认新 Python 是否已添加到 PATH
3. 尝试使用 `py -3.11` 命令
4. 查看详细指南：`Python升级指南.md`
