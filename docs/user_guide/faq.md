# 常见问题 (FAQ)

## 安装相关问题

### Q1: 安装 PyQt6 失败怎么办？

**A**: 请尝试以下步骤：

1. 确保 Python 版本为 3.11 或更高：
   ```bash
   python --version
   ```

2. 升级 pip：
   ```bash
   pip install --upgrade pip
   ```

3. 安装 PyQt6：
   ```bash
   pip install PyQt6
   ```

4. 如果仍然失败，在 Linux 上可能需要安装系统依赖：
   ```bash
   # Ubuntu/Debian
   sudo apt-get install python3-pyqt6
   
   # Fedora
   sudo dnf install python3-qt6
   ```

### Q2: 虚拟环境激活失败？

**A**: 检查以下几点：

1. 确认虚拟环境已创建：
   ```bash
   # Windows
   python -m venv venv
   
   # Linux/Mac
   python3 -m venv venv
   ```

2. 使用正确的激活命令：
   ```bash
   # Windows PowerShell
   venv\Scripts\Activate.ps1
   
   # Windows CMD
   venv\Scripts\activate.bat
   
   # Linux/Mac
   source venv/bin/activate
   ```

3. 如果 PowerShell 执行策略限制，运行：
   ```powershell
   Set-ExecutionPolicy -ExecutionPolicy RemoteSigned -Scope CurrentUser
   ```

---

## 使用相关问题

### Q3: 如何加载 .res 文件？

**A**: 在相应的测试 Tab 中：

1. 点击 "选择文件" 按钮
2. 浏览并选择 .res 文件
3. 文件加载后会自动解析
4. 如果文件格式正确，状态栏会显示 "文件加载成功"

**注意**: 文件必须包含 `param_id` 段和 `quasiStatic` 数据段。

### Q4: 计算结果不准确怎么办？

**A**: 请检查以下几点：

1. **数据文件是否正确**:
   - 确认文件已完整加载
   - 检查文件是否损坏
   - 验证文件格式是否正确

2. **车辆参数是否设置正确**:
   - 检查车辆参数面板中的参数值
   - 确认单位是否正确（mm/m, rad/deg）
   - 验证参数是否在合理范围内

3. **参数ID是否正确**:
   - 确认选择的参数ID与数据文件匹配
   - 检查参数名称是否正确

4. **数据范围**:
   - 确认数据范围是否合理
   - 检查是否有异常值

### Q5: 图表与 MATLAB 版本不一致？

**A**: 如果发现不一致，请：

1. **检查数据文件**:
   - 确认使用的是相同的 .res 文件
   - 验证数据是否相同

2. **检查参数设置**:
   - 确认车辆参数与 MATLAB 版本一致
   - 检查单位转换是否正确

3. **检查图表设置**:
   - 确认坐标轴范围是否一致
   - 检查线型和颜色设置

4. **报告问题**:
   - 如果确认数据相同但图表不一致，请报告问题
   - 提供详细的对比信息（截图、数据文件等）

### Q6: 程序运行缓慢？

**A**: 可以尝试以下优化：

1. **检查文件大小**:
   - 大文件（>100MB）处理需要更多时间
   - 考虑使用更快的存储设备

2. **关闭其他程序**:
   - 释放系统资源
   - 关闭不必要的后台程序

3. **检查系统资源**:
   - 确保有足够的内存
   - 检查 CPU 使用率

4. **优化设置**:
   - 减少同时显示的图表数量
   - 关闭实时更新功能（如果支持）

### Q7: 如何导出图表？

**A**: 有多种方式：

1. **右键菜单**:
   - 在图表区域右键点击
   - 选择 "保存图片"
   - 选择保存格式（PNG, PDF, SVG等）

2. **菜单栏**:
   - 点击 "文件" -> "导出图表"
   - 选择保存位置和格式

3. **快捷键**:
   - 某些版本可能支持快捷键（如 Ctrl+S）

### Q8: 如何对比多个数据文件？

**A**: 使用对比功能：

1. 加载第一个文件
2. 点击 "添加对比" 按钮
3. 选择第二个文件
4. 重复步骤 2-3 添加更多对比
5. 图表会显示多条曲线，使用不同颜色区分

**注意**: 最多可以同时对比 5 个文件（可在设置中调整）。

---

## 数据相关问题

### Q9: 支持哪些文件格式？

**A**: 目前支持：

- `.res` - Adams 仿真结果文件（主要格式）

**未来可能支持**:
- `.csv` - CSV 格式数据文件
- `.xlsx` - Excel 文件
- 其他格式（根据需求添加）

### Q10: 数据文件格式要求？

**A**: .res 文件必须包含：

1. **param_id 段**:
   - 包含参数ID定义
   - 格式：`param_id = { ... }`

2. **quasiStatic 数据段**:
   - 包含仿真数据
   - 格式：`"quasiStatic" = [ ... ]`

3. **数据完整性**:
   - 数据矩阵应为 n 行 x 2751 列
   - 每行对应一个时间步或工况点

### Q11: 如何处理数据缺失？

**A**: 程序会自动处理：

1. **缺失参数ID**:
   - 如果参数ID不存在，会显示警告
   - 相关计算会跳过该参数

2. **数据不完整**:
   - 如果数据行数不足，会使用可用数据
   - 会显示警告信息

3. **异常值**:
   - 程序会检测异常值
   - 可以选择过滤或保留

---

## 功能相关问题

### Q12: 哪些功能已实现？

**A**: 已实现的功能：

- ✅ Bump 测试分析
- ✅ Roll 测试分析
- ✅ Static Load Lateral 测试
- ✅ Static Load Braking 测试
- ✅ Static Load Acceleration 测试
- ✅ 所有主要 K&C 参数计算
- ✅ 图表绘制和导出

### Q13: 哪些功能尚未实现？

**A**: 以下功能已保留但尚未实现：

- ⏳ Align Torque 测试（Tab 已创建）
- ⏳ 参考车辆对比功能
- ⏳ 批量处理功能
- ⏳ 报告生成功能
- ⏳ 数据导入/导出功能

这些功能会在后续版本中添加。

### Q14: 如何添加新的测试工况？

**A**: 需要开发人员操作：

1. 在 `src.gui.kc_tabs` 中创建新的 Tab 类
2. 在 `src.data.kc_calculator` 中添加计算函数
3. 在 `src.plot` 中添加绘图函数
4. 在主窗口中注册新的 Tab

详细步骤请参考 [扩展指南](../development/extension_guide.md)。

---

## 错误和故障排除

### Q15: 程序启动失败？

**A**: 检查以下内容：

1. **Python 版本**:
   ```bash
   python --version  # 应该是 3.11+
   ```

2. **依赖安装**:
   ```bash
   pip install -r requirements.txt
   ```

3. **日志文件**:
   - 查看日志文件了解详细错误信息
   - 日志文件通常在程序目录下

4. **系统兼容性**:
   - 确认操作系统支持（Windows 10+, Linux）
   - 检查是否有必要的系统库

### Q16: 文件解析错误？

**A**: 可能的原因：

1. **文件格式不正确**:
   - 确认文件是有效的 .res 文件
   - 检查文件是否损坏

2. **文件编码问题**:
   - 文件应该是 UTF-8 或 ASCII 编码
   - 避免使用特殊字符

3. **文件路径问题**:
   - 确认文件路径正确
   - 避免使用过长的路径
   - 路径中不要包含特殊字符

### Q17: 计算错误？

**A**: 检查以下内容：

1. **数据有效性**:
   - 确认数据已正确加载
   - 检查数据范围是否合理

2. **参数设置**:
   - 确认车辆参数已设置
   - 检查参数值是否在合理范围内

3. **数学运算**:
   - 检查是否有除零错误
   - 确认数据不为空

---

## 其他问题

### Q18: 如何获取帮助？

**A**: 可以通过以下方式：

1. **文档**:
   - 查看 [用户手册](user_manual.md)
   - 阅读 [快速开始指南](quick_start.md)

2. **日志**:
   - 查看程序日志文件
   - 日志包含详细的错误信息

3. **技术支持**:
   - 提交 Issue（如果使用 Git）
   - 联系开发团队

### Q19: 如何报告 Bug？

**A**: 报告 Bug 时请提供：

1. **问题描述**:
   - 详细描述问题
   - 说明预期行为和实际行为

2. **重现步骤**:
   - 提供详细的重现步骤
   - 说明在什么情况下出现

3. **环境信息**:
   - Python 版本
   - 操作系统版本
   - 程序版本

4. **相关文件**:
   - 日志文件
   - 数据文件（如果可能）
   - 截图或错误信息

### Q20: 如何贡献代码？

**A**: 请参考 [贡献指南](../development/contribution.md)：

1. Fork 项目
2. 创建功能分支
3. 编写代码和测试
4. 提交 Pull Request

---

## 联系支持

如果以上问题无法解决，请：

- 📧 发送邮件到技术支持邮箱
- 🐛 在 GitHub 上提交 Issue
- 📖 查看完整文档

---

**最后更新**: 2025-01-27
